resource "local_file" "github_ci_configuration" {
  filename = "${path.root}/../../.github/generated.env"

  content = <<EOF
# DO NOT EDIT
# This file is generated by /tests/terraform/generate.tf

echo AWS_REGION="${data.aws_region.current.name}" >> $GITHUB_ENV
echo AWS_ROLE_TO_ASSUME="${aws_iam_role.github_ci.arn}" >> $GITHUB_ENV

echo AWS_TESTUSER_NAME_PREFIX="${local.testuser_name_prefix}" >> $GITHUB_ENV
echo AWS_TESTUSER_PERMISSIONS_BOUNDARY_ARN="${aws_iam_policy.testuser_boundary.arn}" >> $GITHUB_ENV
EOF
}